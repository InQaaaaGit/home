# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–µ–º Moodle

## üéØ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π JavaScript —Ñ–∞–π–ª

### üìÅ –§–∞–π–ª: `universal-theme-integration.js`

–≠—Ç–æ—Ç —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–º—É Moodle –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –º–µ—Å—Ç–æ.

## üîß –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–µ–º—ã –∏ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:

### 1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–∞ Boost**
- **–°–µ–ª–µ–∫—Ç–æ—Ä:** `#usernavigation`
- **–ü–æ–∑–∏—Ü–∏—è:** –ü–æ—Å–ª–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Boost theme - usernavigation

### 2. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–µ–º—ã —Å header-tools**
- **–°–µ–ª–µ–∫—Ç–æ—Ä:** `.header-tools.type-text.tools-pos2`
- **–ü–æ–∑–∏—Ü–∏—è:** –ü–æ—Å–ª–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Custom theme - header-tools

### 3. **Bootstrap –Ω–∞–≤–∏–≥–∞—Ü–∏—è**
- **–°–µ–ª–µ–∫—Ç–æ—Ä:** `.navbar-nav.ms-auto`
- **–ü–æ–∑–∏—Ü–∏—è:** –ü–æ—Å–ª–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Bootstrap navbar

### 4. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- **–°–µ–ª–µ–∫—Ç–æ—Ä:** `.usermenu-container`
- **–ü–æ–∑–∏—Ü–∏—è:** –ü–µ—Ä–µ–¥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
- **–û–ø–∏—Å–∞–Ω–∏–µ:** User menu container

### 5. **–ü–æ—Å–ª–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
- **–°–µ–ª–µ–∫—Ç–æ—Ä:** `.popover-region-notifications`
- **–ü–æ–∑–∏—Ü–∏—è:** –ü–æ—Å–ª–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ:** After notifications

### 6. **Fallback (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)**
- **–°–µ–ª–µ–∫—Ç–æ—Ä:** `body`
- **–ü–æ–∑–∏—Ü–∏—è:** –í –Ω–∞—á–∞–ª–æ body
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Fallback - body

## üöÄ –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å:

### **–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ç–µ–º—ã Moodle:**

**–í —Ä–∞–∑–¥–µ–ª–µ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π HTML –¥–ª—è <head>":**
```html
<link rel="stylesheet" href="/local/cdo_visuallyimpaired/plugins/dist/css/bvi.min.css">
```

**–í —Ä–∞–∑–¥–µ–ª–µ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π HTML –¥–ª—è –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–≥–æ —Ç–µ–≥–∞ </body>":**
```html
<script src="/local/cdo_visuallyimpaired/plugins/dist/js/bvi.min.js"></script>
<script src="/local/cdo_visuallyimpaired/js/universal-theme-integration.js"></script>
```

## üé® –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:

### 1. **–ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**
```javascript
// –ü—Ä–æ–±—É–µ—Ç –∫–∞–∂–¥—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –ø–æ –ø–æ—Ä—è–¥–∫—É
for (var i = 0; i < this.selectors.length; i++) {
    var selector = this.selectors[i];
    var container = document.querySelector(selector.container);
    
    if (container) {
        // –ù–∞–π–¥–µ–Ω –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        this.insertButton(container, selector.position);
        break;
    }
}
```

### 2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∏–ª—è —Ç–µ–º—ã**
```javascript
detectThemeStyle: function() {
    if (document.body.classList.contains('theme-boost')) {
        return 'boost-style';
    } else if (document.body.classList.contains('theme-classic')) {
        return 'classic-style';
    } else if (document.querySelector('.header-tools')) {
        return 'custom-theme-style';
    }
    return 'default-style';
}
```

### 3. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º**
–ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É.

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–π –∫–Ω–æ–ø–∫–∏:

```html
<div id="universal-accessibility-btn" class="d-flex align-items-stretch" style="margin-right: 10px;">
    <div class="popover-region collapsed">
        <a href="#" class="nav-link popover-region-toggle position-relative icon-no-margin bvi-open" 
           role="button" aria-label="–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è —Å–ª–∞–±–æ–≤–∏–¥—è—â–∏—Ö" title="–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è —Å–ª–∞–±–æ–≤–∏–¥—è—â–∏—Ö">
            <i class="icon fa fa-eye fa-fw" title="–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å" role="img" aria-label="–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å"></i>
        </a>
    </div>
</div>
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –≤—ã —É–≤–∏–¥–∏—Ç–µ:

**–£—Å–ø–µ—à–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
- ‚úÖ "–ù–∞–π–¥–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: Custom theme - header-tools .header-tools.type-text.tools-pos2"
- ‚úÖ "–ö–Ω–æ–ø–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞: Custom theme - header-tools"
- ‚úÖ "BVI –ø–ª–∞–≥–∏–Ω —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
- ‚ö†Ô∏è "–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏"
- ‚ö†Ô∏è "BVI –ø–ª–∞–≥–∏–Ω –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥"

**–û—à–∏–±–∫–∏:**
- ‚ùå "–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏: [–¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏]"

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–µ–º:

### **–¢–µ–º–∞ —Å header-tools:**
–ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `<div class="header-tools type-text tools-pos2">`

### **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–∞ Boost:**
–ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ `#usernavigation`

### **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–µ–º—ã:**
–ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –≤ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–º –º–µ—Å—Ç–µ

### **–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ:**
–ü–æ—è–≤–∏—Ç—Å—è –ø–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤:

–ï—Å–ª–∏ –≤–∞—à–∞ —Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö –≤ –º–∞—Å—Å–∏–≤ `selectors`:

```javascript
selectors: [
    // –í–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä
    {
        container: '.your-custom-selector',
        position: 'after',
        description: 'Your custom theme'
    },
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
]
```

## üîß –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:

- **`after`** - –ø–æ—Å–ª–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **`before`** - –ø–µ—Ä–µ–¥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º  
- **`prepend`** - –≤ –Ω–∞—á–∞–ª–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **`append`** - –≤ –∫–æ–Ω–µ—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º—ã**
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–µ–º**
- ‚úÖ **Fallback –º–µ—Ö–∞–Ω–∏–∑–º**
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ **Graceful degradation**
- ‚úÖ **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Å—Ç–∏–ª—å —Ç–µ–º—ã**

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **–ö–ª–∞—Å—Å `bvi-open`** –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–∫–∏
2. **–ó–∞–¥–µ—Ä–∂–∫–∞ 500–º—Å** –¥–ª—è –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è** - –∫–Ω–æ–ø–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ
4. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤** - –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

## üéâ –ò—Ç–æ–≥:

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è `universal-theme-integration.js` –∫–Ω–æ–ø–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø–æ–¥—Ö–æ–¥—è—â–µ–º –º–µ—Å—Ç–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π —Ç–µ–º—ã Moodle!
