# AG Redirect Block

Блок для Moodle 4.5+, который отображает ссылку на полную регистрацию для пользователей с Bitrix Lead ID.

## Описание

Этот блок проверяет наличие Bitrix Lead ID у пользователя и отображает кнопку для перехода к полной регистрации на внешнем сайте. Блок работает только для пользователей, у которых есть Bitrix Lead ID.

## Установка

1. Скопируйте папку `block_cdo_ag_redirect` в директорию `/blocks/` вашего Moodle
2. Перейдите в Администрирование → Уведомления
3. Установите плагин
4. Добавьте блок на нужные страницы

## Возможности

- Автоматическое определение пользователей с Bitrix Lead ID
- Отображение кнопки регистрации только для нужных пользователей
- Поддержка добавления на личную панель, курсы и главную страницу
- Многоязычная поддержка (русский и английский)

## Требования

- Moodle 4.5 или выше
- PHP 8.0 или выше

## Структура файлов

```
block_cdo_ag_redirect/
├── block_cdo_ag_redirect.php    # Основной класс блока
├── version.php                  # Информация о версии
├── lib.php                      # Дополнительные функции
├── README.md                    # Документация
├── db/
│   ├── access.php              # Определения возможностей
│   └── install.xml             # XMLDB схема
└── lang/
    ├── en/
    │   └── block_cdo_ag_redirect.php
    └── ru/
        └── block_cdo_ag_redirect.php
```

## Возможности (Capabilities)

- `block/cdo_ag_redirect:addinstance` - Добавление блока на страницы
- `block/cdo_ag_redirect:myaddinstance` - Добавление блока на личную панель
- `block/cdo_ag_redirect:view` - Просмотр блока

## Автор

InQ, 2022

## Лицензия

GPL v3 или более поздняя версия 